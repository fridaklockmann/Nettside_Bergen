var toalettliste = [{
         "herre":"1",
         "tid_sondag":"07.00 - 23.15",
         "pissoir_only":"NULL",
         "stellerom":"NULL",
         "latitude":"60.388076",
         "tid_hverdag":"07.00 - 23.15",
         "plassering":"NONNESETER TERMINAL, SØR",
         "tid_lordag":"07.00 - 23.15",
         "rullestol":"1",
         "adresse":"Lungegårdskaien",
         "pris":"12",
         "id":"1",
         "place":"NONNESETER TERMINAL, SOUTH",
         "dame":"1",
         "longitude":"5.334937"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"NULL",
         "latitude":"60.388871",
         "tid_hverdag":"05.30 - 23.50",
         "plassering":"NONNESETER TERMINAL , NORD",
         "tid_lordag":"07.00 - 23.15",
         "rullestol":"1",
         "adresse":"Østre Strømkai",
         "pris":"12",
         "id":"2",
         "place":"NONNESETER TERMINAL , NORTH",
         "dame":"1",
         "longitude":"5.334079"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"NULL",
         "latitude":"60.388868",
         "tid_hverdag":"09.00 - 17.00",
         "plassering":"SKYSS KUNDESENTER",
         "tid_lordag":"09.00 - 15.00",
         "rullestol":"1",
         "adresse":"Østre Strømkai",
         "pris":"12",
         "id":"3",
         "place":"SKYSS CUSTOMER CENTRE",
         "dame":"1",
         "longitude":"5.334079"
      },
      {
         "herre":"1",
         "tid_sondag":"07.00 - 23.00",
         "pissoir_only":"NULL",
         "stellerom":"NULL",
         "latitude":"60.39041",
         "tid_hverdag":"07.00 - 23.00",
         "plassering":"JERNBANESTASJONEN",
         "tid_lordag":"07.00 - 23.00",
         "rullestol":"NULL",
         "adresse":"Strømgaten 4",
         "pris":"10",
         "id":"4",
         "place":"RAILWAY STATION",
         "dame":"1",
         "longitude":"5.332995"
      },
      {
         "herre":"1",
         "tid_sondag":"08.30 - 22.00",
         "pissoir_only":"NULL",
         "stellerom":"1",
         "latitude":"60.394554",
         "tid_hverdag":"09.00 - 23.00",
         "plassering":"MATHALLEN",
         "tid_lordag":"08.30 - 22.00",
         "rullestol":"1",
         "adresse":"Strandkaien 3",
         "pris":"10",
         "id":"5",
         "place":"FISH MARKET",
         "dame":"1",
         "longitude":"5.324099"
      },
      {
         "herre":"1",
         "tid_sondag":"08.00 - 18.00",
         "pissoir_only":"NULL",
         "stellerom":"",
         "latitude":"60.395432",
         "tid_hverdag":"08.00 - 18.00",
         "plassering":"STRANDKAITERMINALEN",
         "tid_lordag":"08.00 - 18.00",
         "rullestol":"",
         "adresse":"Strandkaien",
         "pris":"10",
         "id":"6",
         "place":"STRANDKAI BOAT TERMINAL",
         "dame":"1",
         "longitude":"5.321034"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"NULL",
         "latitude":"60.3913929",
         "tid_hverdag":"08.00 - 15.00",
         "plassering":"BERGEN KOMMUNE, INNBYGGERSERVICE",
         "tid_lordag":"NULL",
         "rullestol":"1",
         "adresse":"Kaigaten 4",
         "pris":"0",
         "id":"7",
         "place":"CITIZEN SERVICE CENTRE",
         "dame":"1",
         "longitude":"5.326855"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"1",
         "latitude":"60.3891794",
         "tid_hverdag":"09.00 - 21.00",
         "plassering":"BERGEN STORSENTER",
         "tid_lordag":"09.00 - 18.00",
         "rullestol":"1",
         "adresse":"Strømgaten 8",
         "pris":"10",
         "id":"8",
         "place":"BERGEN STORSENTER",
         "dame":"1",
         "longitude":"5.3305793"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"1",
         "latitude":"60.392209",
         "tid_hverdag":"09.00 - 21.00",
         "plassering":"SUNDT MOTEHUS",
         "tid_lordag":"09.00 - 18.00",
         "rullestol":"1",
         "adresse":"Torgallmenningen 14",
         "pris":"10",
         "id":"9",
         "place":"SUNDT FASHION HOUSE",
         "dame":"1",
         "longitude":"5.324011"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"1",
         "latitude":"60.3928444",
         "tid_hverdag":"09.00 - 20.00",
         "plassering":"XHIBITION",
         "tid_lordag":"09.00 - 18.00",
         "rullestol":"1",
         "adresse":"Småstrandgaten 3",
         "pris":"10",
         "id":"10",
         "place":"XHIBITION",
         "dame":"1",
         "longitude":"5.3239541"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"1",
         "latitude":"60.3947371",
         "tid_hverdag":"09.00 - 21.00",
         "plassering":"GALLERIET",
         "tid_lordag":"09.00 - 18.00",
         "rullestol":"1",
         "adresse":"Torgallmenningen 8",
         "pris":"10",
         "id":"11",
         "place":"GALLERIET",
         "dame":"1",
         "longitude":"5.3243561"
      },
      {
         "herre":"1",
         "tid_sondag":"NULL",
         "pissoir_only":"NULL",
         "stellerom":"1",
         "latitude":"60.3944194",
         "tid_hverdag":"10.00 - 20.00",
         "plassering":"KLØVERHUSET",
         "tid_lordag":"10.00 - 18.00",
         "rullestol":"1",
         "adresse":"Strandgaten 13 -15",
         "pris":"10",
         "id":"12",
         "place":"KLØVERHUSET",
         "dame":"1",
         "longitude":"5.3205649"
      },
      {
         "herre":"1",
         "tid_sondag":"09.00 - 18.00",
         "pissoir_only":"NULL",
         "stellerom":"NULL",
         "latitude":"60.3974108",
         "tid_hverdag":"09.00 - 18.00",
         "plassering":"BRYGGEN BESØKSSENTER",
         "tid_lordag":"09.00 - 18.00",
         "rullestol":"1",
         "adresse":"Jacobsfjorden, Bryggen",
         "pris":"10",
         "id":"13",
         "place":"BRYGGEN VISITOR CENTRE",
         "dame":"1",
         "longitude":"5.3222145"
      },
      {
         "herre":"NULL",
         "tid_sondag":"ALL",
         "pissoir_only":"1",
         "stellerom":"NULL",
         "latitude":"60.397359",
         "tid_hverdag":"ALL",
         "plassering":"C. SUNDTSGT",
         "tid_lordag":"ALL",
         "rullestol":"NULL",
         "adresse":"C. Sundts gt",
         "pris":"NULL",
         "id":"14",
         "place":"C. SUNDTSGT",
         "dame":"NULL",
         "longitude":"5.313963"
      },
      {
         "herre":"NULL",
         "tid_sondag":"ALL",
         "pissoir_only":"1",
         "stellerom":"NULL",
         "latitude":"60.397557",
         "tid_hverdag":"ALL",
         "plassering":"NORDNES SKOLE",
         "tid_lordag":"ALL",
         "rullestol":"NULL",
         "adresse":"Nordnesparken 3",
         "pris":"NULL",
         "id":"15",
         "place":"NORDNES SKOLE",
         "dame":"NULL",
         "longitude":"5.307858"
      }];

//  Gjør at scriptet ikke prøver å finne elementer før siden
//  er ferdig innlastet, og unngår null-pointer
window.onload = function(){
  hamburger();
  visSøk();
  loadFile();
  filtrer();
};

//lager hamburgermeny
 function hamburger(){
  var hamb = document.getElementById("hamburger");
  if(hamb){
    console.log("Hamburger-meny fungerer!");
    hamb.addEventListener("click", endreNavn);
    //  Gjør slik at elementene i hambugrerklassen bytter navn og endrer style i CSS-dokumentet
    hamb.addEventListener("click", function(){hamb.classList.toggle("change");});
  } else {
    console.log("Finner ikke elementet 'hamburger'");
  }
};

//bytter navn på classene, slik at man får andre egenskaper i css-filen
  function endreNavn() {
    var topNav = document.getElementById("topNav");
    if (topNav.className === "navbar") {
        topNav.className += " responsive";
    } else {
        topNav.className = "navbar";
    }
}

// Viser og skjuler avansert søk ved klikk
 function visSøk(){
    console.log(document.getElementById("avansertSøkKnapp"));
    var knapp = document.getElementById("avansertSøkKnapp");
    if(knapp){
      console.log("Knapp fungerer!");
      knapp.addEventListener("click", function(){
        var avansert = document.getElementById("boksTilSøk");
        if (avansert.style.display === "flex") {
          avansert.style.display = "none";
        } else {
          avansert.style.display = "flex";
        }
      });
    }
    else {
      console.log("Finner ikke elementet 'avansertSøkKnapp'");
    }
}

function initMap() {
  var bergen = {
    lat: 60.39299,
    lng: 5.327455
  };
  //lager kart med sentrum i Bergen
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 15,
    center: bergen
  });

  //lager punkter på kartet.
  for(var i = 0; i < toalettliste.length; i++){
    //finner geoLocations for punktet på tabellen
    var bergen = {
      lat: parseFloat(toalettliste[i].latitude),
      lng: parseFloat(toalettliste[i].longitude)
    };
    console.log(bergen);
    //Setter markør på kartet
    var bergen = new google.maps.Marker({
      position: bergen,
      map: map,
      label: toalettliste[i].id,
      title: 'Toalett nummer: ' + toalettliste[i].id
    });
  }
} //end initMap


function loadFile() {
  var tabell = document.getElementById("tableBody");
  toalettliste.forEach(
    function(element){ tabell.appendChild(createElement(element));}
  )
}

function toalett(){
  this.id = id;
  this.plassering = plassering;
  this.adresse = adresse;
  this.pris = pris;
  this.tid_hverdag = tid_hverdag;
  this.tid_lordag = tid_lordag;
  this.tid_sondag = tid_sondag;
  this.dame = dame;
  this.herre = herre;
  this.rullestol = rullestol;
  this.stellerom = stellerom;
  this.place = place;
  this.pissoir_only = pissoir_only;
  this.latitude = latitude;
  this.longitude = longitude;
}

function filtrer(){
  console.log("du har trykket på filtrerknappen :)");
}

function createElement(element) {
    var rekke = document.createElement("tr");
    rekke.classList.add("toalett");

    // oppretter span-element for id
    var id = document.createElement("td");
    id.classList.add("id");
    id.innerHTML = element.id;
    rekke.appendChild(id);

    // oppretter span-element for plassering
    var plassering = document.createElement("td");
    plassering.classList.add("plassering");
    plassering.innerHTML = element.plassering;
    rekke.appendChild(plassering);

    // oppretter span-element for adresse
    var adresse = document.createElement("td");
    adresse.classList.add("adresse");
    adresse.innerHTML = element.adresse;
    rekke.appendChild(adresse);

    // oppretter span-element for pris
    var pris = document.createElement("td");
    pris.classList.add("pris");
    pris.innerHTML = element.pris;
    rekke.appendChild(pris);

    // oppretter span-element for tid hverdag
    var tid_hverdag = document.createElement("td");
    tid_hverdag.classList.add("tid_hverdag");
    tid_hverdag.innerHTML = element.tid_hverdag;
    rekke.appendChild(tid_hverdag);

    // oppretter span-element for tid_lørdag
    var tid_lørdag = document.createElement("td");
    tid_lørdag.classList.add("tid_lørdag");
    tid_lørdag.innerHTML = element.tid_lordag;
    rekke.appendChild(tid_lørdag);

    // oppretter span-element for tid_søndag
    var tid_søndag = document.createElement("td");
    tid_søndag.classList.add("tid_søndag");
    tid_søndag.innerHTML = element.tid_sondag;
    rekke.appendChild(tid_søndag);

    // oppretter span-element for dame
    var dame = document.createElement("td");
    dame.classList.add("dame");
    dame.innerHTML = element.dame;
    rekke.appendChild(dame);

    // oppretter span-element for herre
    var herre = document.createElement("td");
    herre.classList.add("herre");
    herre.innerHTML = element.herre;
    rekke.appendChild(herre);

    // oppretter span-element for rullestol
    var rullestol = document.createElement("td");
    rullestol.classList.add("dame");
    rullestol.innerHTML = element.rullestol;
    rekke.appendChild(rullestol);

    // oppretter span-element for stellerom
    var stellerom = document.createElement("td");
    stellerom.classList.add("stellerom");
    stellerom.innerHTML = element.stellerom;
    rekke.appendChild(stellerom);

    // oppretter span-element for place
    var place = document.createElement("td");
    place.classList.add("place");
    place.innerHTML = element.place;
    rekke.appendChild(place);

    // oppretter span-element for pissoir_only
    var pissoir_only = document.createElement("td");
    pissoir_only.classList.add("pissoir_only");
    pissoir_only.innerHTML = element.pissoir_only;
    rekke.appendChild(pissoir_only);

    // oppretter span-element for latitude
    var latitude = document.createElement("td");
    latitude.classList.add("latitude");
    latitude.innerHTML = element.latitude;
    rekke.appendChild(latitude);

    // oppretter span-element for longitude
    var longitude = document.createElement("td");
    longitude.classList.add("longitude");
    longitude.innerHTML = element.longitude;
    rekke.appendChild(longitude);

  //  console.log(rekke);
    return rekke;
};
